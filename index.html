<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aplikasi Pembelajaran Bahasa Jepang - Lingkungan Sekolah</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(45deg, #ff6b6b, #ffa726);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .content {
            padding: 40px;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e0e0e0;
            border-radius: 4px;
            margin-bottom: 30px;
            overflow: hidden;
        }

        .progress {
            height: 100%;
            background: linear-gradient(45deg, #4CAF50, #8BC34A);
            transition: width 0.3s ease;
            border-radius: 4px;
        }

        .menu-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .menu-card {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 15px;
            padding: 30px 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .menu-card:hover {
            background: #e3f2fd;
            border-color: #2196F3;
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(33, 150, 243, 0.2);
        }

        .menu-icon {
            font-size: 3em;
            margin-bottom: 15px;
        }

        .menu-card h3 {
            color: #333;
            margin-bottom: 10px;
            font-size: 1.3em;
        }

        .menu-card p {
            color: #666;
            font-size: 0.9em;
            line-height: 1.4;
        }

        .kosakata-card {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
            text-align: center;
            border: 2px solid #4CAF50;
        }

        .kosakata-word {
            font-size: 2.5em;
            font-weight: bold;
            color: #2E7D32;
            margin: 20px 0;
        }

        .kosakata-meaning {
            font-size: 1.5em;
            color: #666;
            background: white;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .kosakata-category {
            font-size: 1em;
            color: #888;
            background: #e3f2fd;
            padding: 8px 16px;
            border-radius: 20px;
            display: inline-block;
            margin-bottom: 15px;
        }

        .kosakata-description {
            font-size: 1em;
            color: #888;
            background: #f0f8ff;
            padding: 10px 16px;
            border-radius: 15px;
            margin-top: 10px;
            font-style: italic;
        }

        .kosakata-image {
            max-width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 10px;
            margin: 20px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            background: #f0f0f0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 4em;
        }

        .kosakata-image.loaded {
            font-size: initial;
        }

        .pola-content {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
            line-height: 1.8;
        }

        .pola-content h3 {
            color: #2196F3;
            margin-bottom: 15px;
            font-size: 1.4em;
        }

        .pola-content .example {
            background: #e3f2fd;
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            border-left: 4px solid #2196F3;
        }

        .pola-content .japanese {
            font-size: 1.3em;
            font-weight: 600;
            color: #1976D2;
            margin-bottom: 5px;
        }

        .pola-content .meaning {
            color: #666;
            font-style: italic;
        }

        .question-container {
            margin-bottom: 30px;
        }

        .question-number {
            color: #666;
            font-size: 0.9em;
            margin-bottom: 10px;
        }

        .question {
            font-size: 1.4em;
            font-weight: 600;
            margin-bottom: 20px;
            color: #333;
            line-height: 1.4;
        }

        .question-image {
            max-width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 10px;
            margin: 20px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .options {
            display: grid;
            gap: 15px;
            margin: 20px 0;
        }

        .option {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            padding: 15px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.1em;
            display: flex;
            align-items: center;
        }

        .option:hover {
            background: #e3f2fd;
            border-color: #2196F3;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(33, 150, 243, 0.2);
        }

        .option.selected {
            background: #e3f2fd;
            border-color: #2196F3;
            color: #1976D2;
        }

        .option-letter {
            background: #2196F3;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-weight: bold;
        }

        .buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 30px;
        }

        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 25px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn-primary {
            background: linear-gradient(45deg, #2196F3, #21CBF3);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(33, 150, 243, 0.3);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #5a6268;
            transform: translateY(-2px);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none !important;
        }

        .result-container {
            text-align: center;
            padding: 40px;
        }

        .score {
            font-size: 3em;
            font-weight: bold;
            color: #4CAF50;
            margin: 20px 0;
        }

        .feedback {
            font-size: 1.2em;
            margin: 20px 0;
            padding: 20px;
            border-radius: 10px;
            background: #f8f9fa;
        }

        .excellent { background: #e8f5e8; color: #2E7D32; }
        .good { background: #fff3e0; color: #ef6c00; }
        .needs-improvement { background: #ffebee; color: #c62828; }

        .hidden {
            display: none;
        }

        @media (max-width: 768px) {
            .container {
                margin: 10px;
                border-radius: 15px;
            }
            
            .header {
                padding: 20px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .content {
                padding: 20px;
            }
            
            .question {
                font-size: 1.2em;
            }
            
            .buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .btn {
                width: 100%;
                max-width: 200px;
            }
            
            .menu-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ« Ayok Mengenal Lingkungan Sekolah dalam Bahasa Jepang</h1>
            <p>Lingkungan Sekolah (å­¦æ ¡ç’°å¢ƒ)</p>
        </div>

        <!-- Main Menu Screen -->
        <div id="main-menu" class="content">
            <h2 style="text-align: center; margin-bottom: 20px; color: #333;">Ayo Belajar Lingkungan Sekolah dalam Bahasa Jepang!</h2>
            <p style="text-align: center; color: #666; margin-bottom: 30px;">Pilih menu pembelajaran yang ingin Anda pelajari:</p>
            
            <div class="menu-grid">
                <div class="menu-card" onclick="showKosakata()">
                    <div class="menu-icon">ğŸ“š</div>
                    <h3>Kosakata (èªå½™)</h3>
                    <p>Pelajari 58 kosakata lengkap: ruangan, orang, dan posisi di sekolah</p>
                </div>
                
                <div class="menu-card" onclick="showPolaKalimat()">
                    <div class="menu-icon">ğŸ’¬</div>
                    <h3>Pola Kalimat (æ–‡å‹)</h3>
                    <p>Pelajari pola kalimat lokasi dan keberadaan dengan contoh praktis</p>
                </div>
                
                <div class="menu-card" onclick="showQuiz()">
                    <div class="menu-icon">âœï¸</div>
                    <h3>Latihan Soal (ç·´ç¿’å•é¡Œ)</h3>
                    <p>Uji pemahaman dengan 30 soal interaktif dengan gambar asli</p>
                </div>
            </div>
        </div>

        <!-- Kosakata Screen -->
        <div id="kosakata-screen" class="content hidden">
            <div class="progress-bar">
                <div class="progress" id="kosakata-progress"></div>
            </div>
            
            <div class="question-container">
                <div class="question-number" id="kosakata-number"></div>
                
                <div class="kosakata-card">
                    <div class="kosakata-category" id="kosakata-category"></div>
                    <div class="kosakata-image" id="kosakata-image">ğŸ«</div>
                    <div class="kosakata-word" id="kosakata-word"></div>
                    <div class="kosakata-meaning" id="kosakata-meaning"></div>
                    <div class="kosakata-description" id="kosakata-description"></div>
                </div>
            </div>
            
            <div class="buttons">
                <button class="btn btn-secondary" onclick="goToMainMenu()">Menu Utama</button>
                <button class="btn btn-secondary" id="prev-kosakata" onclick="previousKosakata()" disabled>Sebelumnya</button>
                <button class="btn btn-primary" id="next-kosakata" onclick="nextKosakata()">Selanjutnya</button>
            </div>
        </div>

        <!-- Pola Kalimat Screen -->
        <div id="pola-screen" class="content hidden">
            <div class="progress-bar">
                <div class="progress" id="pola-progress"></div>
            </div>
            
            <div class="question-container">
                <div class="question-number" id="pola-number"></div>
                <div class="pola-content" id="pola-content"></div>
            </div>
            
            <div class="buttons">
                <button class="btn btn-secondary" onclick="goToMainMenu()">Menu Utama</button>
                <button class="btn btn-secondary" id="prev-pola" onclick="previousPola()" disabled>Sebelumnya</button>
                <button class="btn btn-primary" id="next-pola" onclick="nextPola()">Selanjutnya</button>
            </div>
        </div>

        <!-- Quiz Screen -->
        <div id="quiz-screen" class="content hidden">
            <div class="progress-bar">
                <div class="progress" id="progress"></div>
            </div>
            
            <div class="question-container">
                <div class="question-number" id="question-number"></div>
                <div class="question" id="question"></div>
                <img id="question-image" class="question-image hidden" alt="Question Image">
                
                <div class="options" id="options"></div>
            </div>
            
            <div class="buttons">
                <button class="btn btn-secondary" id="prev-btn" onclick="previousQuestion()" disabled>Sebelumnya</button>
                <button class="btn btn-primary" id="next-btn" onclick="nextQuestion()" disabled>Selanjutnya</button>
                <button class="btn btn-primary hidden" id="finish-btn" onclick="finishQuiz()">Selesai</button>
            </div>
        </div>

        <!-- Result Screen -->
        <div id="result-screen" class="content result-container hidden">
            <h2>ğŸ‰ Quiz Selesai!</h2>
            <div class="score" id="final-score"></div>
            <div class="feedback" id="feedback"></div>
            
            <div class="buttons">
                <button class="btn btn-primary" onclick="restartQuiz()">Ulangi Quiz</button>
                <button class="btn btn-secondary" onclick="goToMainMenu()">Menu Utama</button>
            </div>
        </div>
    </div>

    <script>
        // Complete kosakata dengan emoji untuk module belajar (58 total)
        const kosakata = [
            // KB Ruangan (28 kata) - dengan emoji yang clear
            { word: "ã˜ã‚€ã—ã¤", meaning: "Ruang Tata Usaha", category: "Ruangan", icon: "ğŸ“‹ğŸ“Š", description: "Ruang administrasi sekolah" },
            { word: "ãã‚‡ã†ã—ã¤", meaning: "Ruang Kelas", category: "Ruangan", icon: "ğŸ«ğŸ“š", description: "Tempat belajar siswa" },
            { word: "ã—ã‚‡ãã©ã†", meaning: "Kantin", category: "Ruangan", icon: "ğŸ½ï¸ğŸ¥˜", description: "Tempat makan di sekolah" },
            { word: "ã—ã‚‡ãã„ã‚“ã—ã¤", meaning: "Ruang Guru", category: "Ruangan", icon: "ğŸ ğŸ‘©â€ğŸ«", description: "Ruang istirahat guru" },
            { word: "ã“ã†ã¡ã‚‡ã†ã—ã¤", meaning: "Ruang Kepala Sekolah", category: "Ruangan", icon: "ğŸ¢ğŸ‘”", description: "Kantor kepala sekolah" },
            { word: "ã»ã‘ã‚“ã—ã¤", meaning: "Ruang UKS", category: "Ruangan", icon: "âš•ï¸ğŸ©¹", description: "Ruang kesehatan sekolah" },
            { word: "ã¨ã—ã‚‡ã‹ã‚“", meaning: "Perpustakaan", category: "Ruangan", icon: "ğŸ“šğŸ“–", description: "Tempat menyimpan buku" },
            { word: "ãã†ã ã‚“ã—ã¤", meaning: "Ruang BK", category: "Ruangan", icon: "ğŸ’¬ğŸ—¨ï¸", description: "Ruang bimbingan konseling" },
            { word: "ã‚Šã‹ã—ã¤", meaning: "Lab IPA", category: "Ruangan", icon: "ğŸ§ªâš—ï¸", description: "Laboratory sains" },
            { word: "ã³ã˜ã‚…ã¤ã—ã¤", meaning: "Ruang Seni", category: "Ruangan", icon: "ğŸ¨ğŸ–Œï¸", description: "Ruang pelajaran seni" },
            { word: "ã“ã†ã©ã†", meaning: "Aula", category: "Ruangan", icon: "ğŸ¤ğŸ­", description: "Ruang pertemuan besar" },
            { word: "ãƒˆã‚¤ãƒ¬", meaning: "Toilet", category: "Ruangan", icon: "ğŸš½ğŸ§¼", description: "Kamar mandi/WC" },
            { word: "ã“ã†ãˆã‚“", meaning: "Taman", category: "Ruangan", icon: "ğŸŒ³ğŸŒº", description: "Area hijau sekolah" },
            { word: "ã‹ã„ãã—ã¤", meaning: "Ruang Rapat", category: "Ruangan", icon: "ğŸ¢ğŸ’º", description: "Ruang pertemuan kecil" },
            { word: "ã«ã‚", meaning: "Halaman", category: "Ruangan", icon: "ğŸŒ±â˜€ï¸", description: "Area terbuka sekolah" },
            { word: "ã¡ã‚…ã†ã—ã‚ƒã˜ã‚‡ã†", meaning: "Tempat Parkir", category: "Ruangan", icon: "ğŸš—ğŸ", description: "Area parkir kendaraan" },
            { word: "ã‚‚ã‚“", meaning: "Gerbang", category: "Ruangan", icon: "ğŸšªğŸ«", description: "Pintu masuk sekolah" },
            { word: "ã‚¢ã‚¤ãƒ†ã‚£ã—ã¤", meaning: "Lab Komputer", category: "Ruangan", icon: "ğŸ’»âŒ¨ï¸", description: "Ruang komputer" },
            { word: "ã†ã‚“ã©ã†ã˜ã‚‡ã†", meaning: "Lapangan Olahraga", category: "Ruangan", icon: "âš½ğŸƒ", description: "Area olahraga outdoor" },
            { word: "ã‚Œã„ã¯ã„ã—ã¤", meaning: "Musholah", category: "Ruangan", icon: "ğŸ•ŒğŸ¤²", description: "Tempat ibadah Islam" },
            { word: "ãã†ã“", meaning: "Gudang", category: "Ruangan", icon: "ğŸ“¦ğŸ—ƒï¸", description: "Tempat penyimpanan barang" },
            { word: "ãƒ­ãƒƒã‚«ãƒ¼", meaning: "Loker", category: "Ruangan", icon: "ğŸ—„ï¸ğŸ”", description: "Lemari penyimpanan siswa" },
            { word: "ã‘ã„ã³ã—ã¤", meaning: "Pos Satpam", category: "Ruangan", icon: "ğŸ›¡ï¸ğŸ ", description: "Pos keamanan sekolah" },
            { word: "ã¶ã‹ã¤ã©ã†ã—ã¤", meaning: "Ruang Ekstrakurikuler", category: "Ruangan", icon: "ğŸ­ğŸª", description: "Ruang kegiatan siswa" },
            { word: "ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼ãƒ«ãƒ¼ãƒ ", meaning: "Ruang Komputer", category: "Ruangan", icon: "ğŸ–¥ï¸ğŸ’¾", description: "Lab teknologi informasi" },
            { word: "ãŸã„ã„ãã‹ã‚“", meaning: "Gedung Olahraga", category: "Ruangan", icon: "ğŸ€ğŸƒâ€â™‚ï¸", description: "Gym sekolah indoor" },
            { word: "ã•ãã‚‡ã†ã°", meaning: "Workshop", category: "Ruangan", icon: "ğŸ”§âš’ï¸", description: "Ruang praktik kerja" },
            { word: "ã‚ã†ã‹", meaning: "Koridor", category: "Ruangan", icon: "ğŸš¶â€â™‚ï¸â¡ï¸", description: "Lorong penghubung ruangan" },

            // KB Orang (15 kata)
            { word: "ã“ã†ã¡ã‚‡ã†", meaning: "Kepala Sekolah", category: "Orang", icon: "ğŸ‘¨â€ğŸ’¼ğŸ“", description: "Pemimpin sekolah" },
            { word: "ãã‚‡ã†ã¨ã†ã›ã‚“ã›ã„", meaning: "Wakil Kepala Sekolah", category: "Orang", icon: "ğŸ‘©â€ğŸ’¼ğŸ“‹", description: "Wakil pemimpin sekolah" },
            { word: "ãã‚‡ã†ã—", meaning: "Guru", category: "Orang", icon: "ğŸ‘¨â€ğŸ«ğŸ“š", description: "Pengajar di sekolah" },
            { word: "ã˜ã‚€ã„ã‚“", meaning: "Staff TU", category: "Orang", icon: "ğŸ‘©â€ğŸ’»ğŸ“„", description: "Petugas administrasi" },
            { word: "ã›ã„ã¨", meaning: "Siswa", category: "Orang", icon: "ğŸ‘¨â€ğŸ“ğŸ“–", description: "Pelajar di sekolah" },
            { word: "ã›ã„ãã†ã„ã‚“", meaning: "Petugas Kebersihan", category: "Orang", icon: "ğŸ§¹ğŸ§½", description: "Pembersih sekolah" },
            { word: "ã‘ã„ã³ã„ã‚“", meaning: "Satpam", category: "Orang", icon: "ğŸ‘®â€â™‚ï¸ğŸ›¡ï¸", description: "Petugas keamanan" },
            { word: "ã‚«ã‚¦ãƒ³ã‚»ãƒªãƒ³ã‚°ãã‚‡ã†ã—", meaning: "Guru BK", category: "Orang", icon: "ğŸ—£ï¸ğŸ’­", description: "Konselor sekolah" },
            { word: "ãŸã‚“ã«ã‚“ãã‚‡ã†ã—", meaning: "Wali Kelas", category: "Orang", icon: "ğŸ‘¨â€ğŸ«ğŸ“", description: "Guru pembimbing kelas" },
            { word: "ã›ã‚“ã‚‚ã‚“ãã‚‡ã†ã—", meaning: "Guru Mata Pelajaran", category: "Orang", icon: "ğŸ“–ğŸ”¬", description: "Guru bidang studi" },
            { word: "ã‹ã„ã‘ã„ãŸã‚“ã¨ã†", meaning: "Bagian Keuangan", category: "Orang", icon: "ğŸ’°ğŸ’³", description: "Petugas keuangan" },
            { word: "ã›ã„ã¨ã‹ã„ã‹ã„ã¡ã‚‡ã†", meaning: "Ketua OSIS", category: "Orang", icon: "ğŸ–ï¸ğŸ‘¨â€ğŸ“", description: "Pemimpin organisasi siswa" },
            { word: "ã›ã„ã¨ã‹ã„ã‚„ãã„ã‚“", meaning: "Pengurus OSIS", category: "Orang", icon: "ğŸ‘¥ğŸ“‹", description: "Anggota organisasi siswa" },
            { word: "ãŒã£ãã‚…ã†ã ã„ã²ã‚‡ã†ã‹ã„", meaning: "Ketua Kelas", category: "Orang", icon: "ğŸ“‹ğŸ‘¨â€ğŸ“", description: "Pemimpin kelas" },
            { word: "ã—ã‚…ã†ã—ã‚‡ãã—ãˆã‚“", meaning: "Pembimbing Karir", category: "Orang", icon: "ğŸ’¼ğŸ¯", description: "Konselor karir" },

            // KB Posisi (15 kata)
            { word: "ã†ãˆ", meaning: "Atas", category: "Posisi", icon: "â¬†ï¸ğŸ”", description: "Bagian atas/di atas" },
            { word: "ã¨ãªã‚Š", meaning: "Sebelah", category: "Posisi", icon: "â†”ï¸ğŸ‘«", description: "Di samping/bersebelahan" },
            { word: "ã—ãŸ", meaning: "Bawah", category: "Posisi", icon: "â¬‡ï¸ğŸ”»", description: "Bagian bawah/di bawah" },
            { word: "ã¾ãªã‹", meaning: "Tengah", category: "Posisi", icon: "ğŸ¯â­•", description: "Di bagian tengah" },
            { word: "ã²ã ã‚Š", meaning: "Kiri", category: "Posisi", icon: "â¬…ï¸ğŸ‘ˆ", description: "Arah/sisi kiri" },
            { word: "ãã¨", meaning: "Luar", category: "Posisi", icon: "ğŸŒğŸšª", description: "Di bagian luar" },
            { word: "ã¿ã", meaning: "Kanan", category: "Posisi", icon: "â¡ï¸ğŸ‘‰", description: "Arah/sisi kanan" },
            { word: "ãªã‹", meaning: "Dalam", category: "Posisi", icon: "ğŸ“¦ğŸ ", description: "Di bagian dalam" },
            { word: "ã¾ãˆ", meaning: "Depan", category: "Posisi", icon: "ğŸ‘€â©", description: "Bagian depan/di depan" },
            { word: "ã‚€ã“ã†", meaning: "Seberang", category: "Posisi", icon: "ğŸŒâ†”ï¸", description: "Di seberang/sisi lain" },
            { word: "ã†ã—ã‚", meaning: "Belakang", category: "Posisi", icon: "ğŸ‘¤âª", description: "Bagian belakang/di belakang" },
            { word: "ã‚ˆã“", meaning: "Samping", category: "Posisi", icon: "â†•ï¸ğŸ“", description: "Di sisi samping" },
            { word: "ã„ã£ã‹ã„", meaning: "Lantai 1", category: "Posisi", icon: "1ï¸âƒ£ğŸ¢", description: "Tingkat pertama" },
            { word: "ã«ã‹ã„", meaning: "Lantai 2", category: "Posisi", icon: "2ï¸âƒ£ğŸ¢", description: "Tingkat kedua" },
            { word: "ã•ã‚“ãŒã„", meaning: "Lantai 3", category: "Posisi", icon: "3ï¸âƒ£ğŸ¢", description: "Tingkat ketiga" }
        ];

        // Pola kalimat sesuai PDF
        const polaKalimat = [
            {
                title: "Pola 1: S ã« ä½• ãŒ ã‚ã‚Šã¾ã™ã‹ï¼Ÿ",
                content: `
                    <h3>Pola: S ã« ä½• ãŒ ã‚ã‚Šã¾ã™ã‹ï¼Ÿ</h3>
                    <p><strong>Fungsi:</strong> Menanyakan apa yang ada di suatu tempat</p>
                    
                    <div class="example">
                        <div class="japanese">ãã‚‡ã†ã—ã¤ ã« ä½• ãŒ ã‚ã‚Šã¾ã™ã‹ï¼Ÿ</div>
                        <div class="meaning">Apa yang ada di dalam kelas?</div>
                    </div>
                    
                    <p><strong>Jawaban:</strong></p>
                    <div class="example">
                        <div class="japanese">ã¤ããˆ ã¨ ã„ã™ ãŒ ã‚ã‚Šã¾ã™ã€‚</div>
                        <div class="meaning">Ada meja dan kursi.</div>
                    </div>
                    
                    <p><strong>Contoh Lain:</strong></p>
                    <div class="example">
                        <div class="japanese">ã¨ã—ã‚‡ã‹ã‚“ ã« ä½• ãŒ ã‚ã‚Šã¾ã™ã‹ï¼Ÿ</div>
                        <div class="meaning">Apa yang ada di perpustakaan?</div>
                    </div>
                    <div class="example">
                        <div class="japanese">ã»ã‚“ ãŒ ã‚ã‚Šã¾ã™ã€‚</div>
                        <div class="meaning">Ada buku.</div>
                    </div>
                `
            },
            {
                title: "Pola 2: S ã« KB ãŒ ã„ã¾ã™/ã‚ã‚Šã¾ã™",
                content: `
                    <h3>Pola: S ã« KB ãŒ ã„ã¾ã™/ã‚ã‚Šã¾ã™</h3>
                    <p><strong>Fungsi:</strong> Menyatakan keberadaan orang/benda di suatu tempat</p>
                    
                    <div class="example">
                        <div class="japanese">ãã‚‡ã†ã—ã¤ ã« ã›ã„ã¨ ãŒ ã„ã¾ã™ã€‚</div>
                        <div class="meaning">Di kelas ada siswa.</div>
                    </div>
                    
                    <div class="example">
                        <div class="japanese">ã“ã†ã¡ã‚‡ã†ã—ã¤ ã« ã“ã†ã¡ã‚‡ã† ãŒ ã„ã¾ã™ã€‚</div>
                        <div class="meaning">Di ruang kepala sekolah ada kepala sekolah.</div>
                    </div>
                    
                    <p><strong>Perbedaan ã„ã¾ã™ dan ã‚ã‚Šã¾ã™:</strong></p>
                    <ul>
                        <li><strong>ã„ã¾ã™</strong> = untuk orang dan hewan (makhluk hidup)</li>
                        <li><strong>ã‚ã‚Šã¾ã™</strong> = untuk benda mati</li>
                    </ul>
                `
            },
            {
                title: "Pola 3: S ã¯ POSISI ã« ã‚ã‚Šã¾ã™/ã„ã¾ã™",
                content: `
                    <h3>Pola: S ã¯ POSISI ã« ã‚ã‚Šã¾ã™/ã„ã¾ã™</h3>
                    <p><strong>Fungsi:</strong> Menunjukkan letak/posisi suatu benda atau orang</p>
                    
                    <div class="example">
                        <div class="japanese">ãƒ­ãƒƒã‚«ãƒ¼ ã¯ ãã‚‡ã†ã—ã¤ ã® ã†ã—ã‚ ã« ã‚ã‚Šã¾ã™ã€‚</div>
                        <div class="meaning">Loker ada di belakang kelas.</div>
                    </div>
                    
                    <p><strong>Kosakata Posisi:</strong></p>
                    <div class="example">
                        <div class="japanese">ã†ãˆ / ã—ãŸ / ã¾ãˆ / ã†ã—ã‚</div>
                        <div class="meaning">Atas / Bawah / Depan / Belakang</div>
                    </div>
                    <div class="example">
                        <div class="japanese">ãªã‹ / ãã¨ / ã¿ã / ã²ã ã‚Š</div>
                        <div class="meaning">Dalam / Luar / Kanan / Kiri</div>
                    </div>
                `
            }
        ];

        // IMPORTANT: PRESERVE existing quiz questions with PNG images that are working!
        const questions = [
            {
                question: "ã“ã‚Œã¯ ã©ã“ã§ã™ã‹ï¼Ÿ",
                image: "img/library.png",
                options: ["ã—ã‚‡ãã©ã†", "ã¨ã—ã‚‡ã‹ã‚“", "ã‚Šã‹ã—ã¤", "ã˜ã‚€ã—ã¤"],
                correct: 1,
                explanation: "Gambar menunjukkan perpustakaan (ã¨ã—ã‚‡ã‹ã‚“) dengan rak-rak buku."
            },
            {
                question: "ãã‚‡ã†ã—ã¤ ã« ä½• ãŒ ã‚ã‚Šã¾ã™ã‹ï¼Ÿ",
                image: "img/classroom.png",
                options: ["ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼ ã¨ ãƒ—ãƒªãƒ³ã‚¿ãƒ¼", "ã¤ããˆ ã¨ ã„ã™", "ã›ã‚“ã›ã„ ã¨ ã›ã„ã¨", "ãƒ†ãƒ¬ãƒ“ ã¨ ã»ã‚“"],
                correct: 1,
                explanation: "Di kelas (ãã‚‡ã†ã—ã¤) ada meja (ã¤ããˆ) dan kursi (ã„ã™)."
            },
            {
                question: "ã“ã®äººã¯ ã ã‚Œã§ã™ã‹ï¼Ÿ",
                image: "img/teacher.png",
                options: ["ã›ã„ã¨", "ãã‚‡ã†ã—", "ã˜ã‚€ã„ã‚“", "ã‘ã„ã³ã„ã‚“"],
                correct: 1,
                explanation: "Gambar menunjukkan guru (ãã‚‡ã†ã—)."
            },
            {
                question: "ã‚¢ã‚¤ãƒ†ã‚£ã—ã¤ ã« ä½• ãŒ ã‚ã‚Šã¾ã™ã‹ï¼Ÿ",
                image: "img/computer_lab.png",
                options: ["ã»ã‚“ ã¨ ãˆã‚“ã´ã¤", "ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼ ã¨ ãƒ—ãƒªãƒ³ã‚¿ãƒ¼", "ãƒ™ãƒƒãƒ‰ ã¨ ãã™ã‚Š", "ãŸã¹ã‚‚ã® ã¨ ã®ã¿ã‚‚ã®"],
                correct: 1,
                explanation: "Ruang lab IT (ã‚¢ã‚¤ãƒ†ã‚£ã—ã¤) ada komputer (ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼) dan printer (ãƒ—ãƒªãƒ³ã‚¿ãƒ¼)."
            },
            {
                question: "ã“ã®å ´æ‰€ã¯ä½•ã§ã™ã‹ï¼Ÿ",
                image: "img/office.png",
                options: ["ãã‚‡ã†ã—ã¤", "ã˜ã‚€ã—ã¤", "ã—ã‚‡ãã©ã†", "ã¨ã—ã‚‡ã‹ã‚“"],
                correct: 1,
                explanation: "Gambar menunjukkan ruang tata usaha (ã˜ã‚€ã—ã¤)."
            },
            // Additional text-based questions to expand the quiz
            {
                question: "ã»ã‘ã‚“ã—ã¤ ã¯ ã©ã“ã« ã‚ã‚Šã¾ã™ã‹ï¼Ÿ",
                options: ["ãŒã£ã“ã† ã® ã¨ãªã‚Š ã« ã‚ã‚Šã¾ã™", "ãŒã£ã“ã† ã® ãªã‹ ã« ã‚ã‚Šã¾ã™", "ãŒã£ã“ã† ã® ãã¨ ã« ã‚ã‚Šã¾ã™", "ãŒã£ã“ã† ã® ã†ãˆ ã« ã‚ã‚Šã¾ã™"],
                correct: 1,
                explanation: "UKS (ã»ã‘ã‚“ã—ã¤) ada di dalam sekolah (ãŒã£ã“ã† ã® ãªã‹ ã« ã‚ã‚Šã¾ã™)."
            },
            {
                question: "ãƒˆã‚¤ãƒ¬ ã¯ ãŒã£ã“ã† ã® _______ ã« ã‚ã‚Šã¾ã™ã€‚",
                options: ["ã†ãˆ", "ã—ãŸ", "ãªã‹", "ãã¨"],
                correct: 2,
                explanation: "Toilet ada di dalam sekolah (ãŒã£ã“ã† ã® ãªã‹ ã« ã‚ã‚Šã¾ã™)."
            },
            {
                question: "ã—ã‚‡ãã©ã† ã§ ä½•ã‚’ ã—ã¾ã™ã‹ï¼Ÿ",
                options: ["ã¹ã‚“ãã‚‡ã†ã—ã¾ã™", "ãŸã¹ã¾ã™", "ãŠã‚ˆãã¾ã™", "ã­ã¾ã™"],
                correct: 1,
                explanation: "Di kantin (ã—ã‚‡ãã©ã†) kita makan (ãŸã¹ã¾ã™)."
            },
            {
                question: "ã¨ã—ã‚‡ã‹ã‚“ ã« _______ ãŒ ã‚ã‚Šã¾ã™ã€‚",
                options: ["ã»ã‚“", "ãŸã¹ã‚‚ã®", "ãã‚‹ã¾", "ãƒ™ãƒƒãƒ‰"],
                correct: 0,
                explanation: "Di perpustakaan (ã¨ã—ã‚‡ã‹ã‚“) ada buku (ã»ã‚“)."
            },
            {
                question: "ã“ã®æ–‡ã‚’å®Œæˆã•ã›ã¦ãã ã•ã„: ã“ã†ã¡ã‚‡ã†ã—ã¤ ã« _______ ãŒ ã„ã¾ã™ã€‚",
                options: ["ã»ã‚“", "ã¤ããˆ", "ã“ã†ã¡ã‚‡ã†", "ãã‚‹ã¾"],
                correct: 2,
                explanation: "Di ruang kepala sekolah (ã“ã†ã¡ã‚‡ã†ã—ã¤) ada kepala sekolah (ã“ã†ã¡ã‚‡ã†)."
            },
            {
                question: "ãŸã„ã„ãã‹ã‚“ ã§ ä½•ã‚’ ã—ã¾ã™ã‹ï¼Ÿ",
                options: ["ã‚Šã‚‡ã†ã‚Šã—ã¾ã™", "ã†ã‚“ã©ã†ã—ã¾ã™", "ãˆã‚’ ã‹ãã¾ã™", "ã»ã‚“ã‚’ ã‚ˆã¿ã¾ã™"],
                correct: 1,
                explanation: "Di gedung olahraga (ãŸã„ã„ãã‹ã‚“) kita berolahraga (ã†ã‚“ã©ã†ã—ã¾ã™)."
            },
            {
                question: "ã€Œã›ã„ã¨ ã¯ ãã‚‡ã†ã—ã¤ ã® ã¾ãˆ ã« ã„ã¾ã™ã€ã“ã®æ–‡ã®æ„å‘³ã¯ï¼Ÿ",
                options: ["Siswa ada di belakang kelas", "Siswa ada di depan kelas", "Siswa ada di dalam kelas", "Siswa ada di atas kelas"],
                correct: 1,
                explanation: "ã¾ãˆ berarti 'depan', jadi siswa ada di depan kelas."
            },
            {
                question: "ã“ã†ã©ã† ã¯ ä½•ã‚’ã™ã‚‹ ã¨ã“ã‚ã§ã™ã‹ï¼Ÿ",
                options: ["ãŠã‚ˆã ã¨ã“ã‚ã§ã™", "ã¯ã£ã´ã‚‡ã†ã™ã‚‹ ã¨ã“ã‚ã§ã™", "ã‚Šã‚‡ã†ã‚Šã™ã‚‹ ã¨ã“ã‚ã§ã™", "ã­ã‚‹ ã¨ã“ã‚ã§ã™"],
                correct: 1,
                explanation: "Aula (ã“ã†ã©ã†) adalah tempat untuk presentasi/pengumuman (ã¯ã£ã´ã‚‡ã†ã™ã‚‹ ã¨ã“ã‚ã§ã™)."
            },
            {
                question: "ã‘ã„ã³ã„ã‚“ ã¯ ã©ã“ã« ã„ã¾ã™ã‹ï¼Ÿ",
                options: ["ã—ã‚‡ãã©ã† ã« ã„ã¾ã™", "ã‘ã„ã³ã—ã¤ ã« ã„ã¾ã™", "ã¨ã—ã‚‡ã‹ã‚“ ã« ã„ã¾ã™", "ã‚Šã‹ã—ã¤ ã« ã„ã¾ã™"],
                correct: 1,
                explanation: "Satpam (ã‘ã„ã³ã„ã‚“) ada di pos satpam (ã‘ã„ã³ã—ã¤)."
            },
            {
                question: "ã›ã„ãã†ã„ã‚“ ã® ã—ã”ã¨ ã¯ ä½•ã§ã™ã‹ï¼Ÿ",
                options: ["ã¹ã‚“ãã‚‡ã†ã‚’ ãŠã—ãˆã¾ã™", "ãŒã£ã“ã†ã‚’ ãã‚Œã„ã« ã—ã¾ã™", "ã»ã‚“ã‚’ ã‹ã—ã¾ã™", "ã‚Šã‚‡ã†ã‚Šã‚’ ã¤ãã‚Šã¾ã™"],
                correct: 1,
                explanation: "Tugas petugas kebersihan (ã›ã„ãã†ã„ã‚“) adalah membersihkan sekolah (ãŒã£ã“ã†ã‚’ ãã‚Œã„ã« ã—ã¾ã™)."
            },
            {
                question: "ãã†ã ã‚“ã—ã¤ ã§ ä½•ã‚’ ã—ã¾ã™ã‹ï¼Ÿ",
                options: ["ãŠã‚ˆãã¾ã™", "ãã†ã ã‚“ã—ã¾ã™", "ã‚Šã‚‡ã†ã‚Šã—ã¾ã™", "ã†ã‚“ã©ã†ã—ã¾ã™"],
                correct: 1,
                explanation: "Di ruang BK (ãã†ã ã‚“ã—ã¤) kita berkonsultasi (ãã†ã ã‚“ã—ã¾ã™)."
            },
            {
                question: "ã¡ã‚…ã†ã—ã‚ƒã˜ã‚‡ã† ã¯ ãŒã£ã“ã† ã® _______ ã« ã‚ã‚Šã¾ã™ã€‚",
                options: ["ãªã‹", "ãã¨", "ã†ãˆ", "ã—ãŸ"],
                correct: 1,
                explanation: "Tempat parkir (ã¡ã‚…ã†ã—ã‚ƒã˜ã‚‡ã†) biasanya ada di luar sekolah (ãŒã£ã“ã† ã® ãã¨ ã« ã‚ã‚Šã¾ã™)."
            },
            {
                question: "ã€Œãƒ­ãƒƒã‚«ãƒ¼ ã¯ ãã‚‡ã†ã—ã¤ ã® ã†ã—ã‚ ã« ã‚ã‚Šã¾ã™ã€ã“ã®æ–‡ã®æ„å‘³ã¯ï¼Ÿ",
                options: ["Loker ada di depan kelas", "Loker ada di belakang kelas", "Loker ada di dalam kelas", "Loker ada di samping kelas"],
                correct: 1,
                explanation: "ã†ã—ã‚ berarti 'belakang', jadi loker ada di belakang kelas."
            },
            {
                question: "ã‚Œã„ã¯ã„ã—ã¤ ã§ ä½•ã‚’ ã—ã¾ã™ã‹ï¼Ÿ",
                options: ["ã„ã®ã‚Šã¾ã™", "ãŠã‚ˆãã¾ã™", "ã¹ã‚“ãã‚‡ã†ã—ã¾ã™", "ãŸã¹ã¾ã™"],
                correct: 0,
                explanation: "Di mushola (ã‚Œã„ã¯ã„ã—ã¤) kita berdoa/beribadah (ã„ã®ã‚Šã¾ã™)."
            },
            {
                question: "ãã†ã“ ã« ä½• ãŒ ã‚ã‚Šã¾ã™ã‹ï¼Ÿ",
                options: ["ã›ã„ã¨", "ãŸã¹ã‚‚ã®", "ã©ã†ã", "ã»ã‚“"],
                correct: 2,
                explanation: "Di gudang (ãã†ã“) ada peralatan/barang (ã©ã†ã)."
            },
            {
                question: "ã³ã˜ã‚…ã¤ã—ã¤ ã§ ä½•ã‚’ ã—ã¾ã™ã‹ï¼Ÿ",
                options: ["ãˆ ã‚’ ã‹ãã¾ã™", "ã†ãŸã‚’ ã†ãŸã„ã¾ã™", "ãŠã‚ˆãã¾ã™", "ã¯ã—ã‚Šã¾ã™"],
                correct: 0,
                explanation: "Di ruang seni (ã³ã˜ã‚…ã¤ã—ã¤) kita menggambar (ãˆ ã‚’ ã‹ãã¾ã™)."
            },
            {
                question: "ã«ã‹ã„ ã¯ ã©ã†ã„ã†æ„å‘³ã§ã™ã‹ï¼Ÿ",
                options: ["Lantai 1", "Lantai 2", "Lantai 3", "Basement"],
                correct: 1,
                explanation: "ã«ã‹ã„ berarti lantai 2."
            },
            {
                question: "ã¶ã‹ã¤ã©ã†ã—ã¤ ã¯ ä½•ã‚’ã™ã‚‹ ã¨ã“ã‚ã§ã™ã‹ï¼Ÿ",
                options: ["ã¹ã‚“ãã‚‡ã†ã—ã¾ã™", "ã‚¯ãƒ©ãƒ–ã‹ã¤ã©ã†ã—ã¾ã™", "ã‚Šã‚‡ã†ã‚Šã—ã¾ã™", "ã­ã¾ã™"],
                correct: 1,
                explanation: "Ruang ekstrakurikuler (ã¶ã‹ã¤ã©ã†ã—ã¤) untuk kegiatan klub (ã‚¯ãƒ©ãƒ–ã‹ã¤ã©ã†)."
            },
            {
                question: "ã‚ã†ã‹ ã¯ ã©ã“ã§ã™ã‹ï¼Ÿ",
                options: ["ã¸ã‚„ ã® ãªã‹", "ã¸ã‚„ ã¨ ã¸ã‚„ ã® ã‚ã„ã ", "ãŒã£ã“ã† ã® ãã¨", "ã«ã‚"],
                correct: 1,
                explanation: "Koridor (ã‚ã†ã‹) ada di antara ruangan (ã¸ã‚„ ã¨ ã¸ã‚„ ã® ã‚ã„ã )."
            },
            {
                question: "ã‚‚ã‚“ ã¯ ãŒã£ã“ã† ã® ã©ã“ ã« ã‚ã‚Šã¾ã™ã‹ï¼Ÿ",
                options: ["ã„ã‚Šãã¡", "ãªã‹", "ã†ã—ã‚", "ã†ãˆ"],
                correct: 0,
                explanation: "Gerbang (ã‚‚ã‚“) ada di pintu masuk (ã„ã‚Šãã¡) sekolah."
            },
            {
                question: "ãã‚‡ã†ã— ã¨ ã›ã„ã¨ ã¯ ãã‚‡ã†ã—ã¤ ã« ã„ã¾ã™ã€‚ä½•äººã„ã¾ã™ã‹ï¼Ÿ",
                options: ["ã²ã¨ã‚Š", "ãµãŸã‚Š ã„ã˜ã‚‡ã†", "ã ã‚Œã‚‚ ã„ã¾ã›ã‚“", "ã‚ã‹ã‚Šã¾ã›ã‚“"],
                correct: 1,
                explanation: "ã¨ menghubungkan dua orang, jadi minimal ada 2 orang atau lebih (ãµãŸã‚Š ã„ã˜ã‚‡ã†)."
            },
            {
                question: "ã€Œã¨ã—ã‚‡ã‹ã‚“ ã« ã ã‚Œ ãŒ ã„ã¾ã™ã‹ï¼Ÿã€ã€Œã ã‚Œã‚‚ ã„ã¾ã›ã‚“ã€‚ã€ã“ã®æ„å‘³ã¯ï¼Ÿ",
                options: ["Ada banyak orang", "Ada satu orang", "Tidak ada siapa-siapa", "Ada guru"],
                correct: 2,
                explanation: "ã ã‚Œã‚‚ ã„ã¾ã›ã‚“ berarti tidak ada siapa-siapa."
            },
            {
                question: "ã•ãã‚‡ã†ã° ã¯ ä½•ã‚’ã™ã‚‹ ã¨ã“ã‚ã§ã™ã‹ï¼Ÿ",
                options: ["ã‚‚ã®ã‚’ ã¤ãã‚Šã¾ã™", "ã»ã‚“ã‚’ ã‚ˆã¿ã¾ã™", "ãŸã¹ã¾ã™", "ã­ã¾ã™"],
                correct: 0,
                explanation: "Workshop (ã•ãã‚‡ã†ã°) adalah tempat untuk membuat sesuatu (ã‚‚ã®ã‚’ ã¤ãã‚Šã¾ã™)."
            },
            {
                question: "ã˜ã‚€ã„ã‚“ ã® ã—ã”ã¨ ã¯ ä½•ã§ã™ã‹ï¼Ÿ",
                options: ["ã†ã‚“ã©ã†ã‚’ ãŠã—ãˆã¾ã™", "ã˜ã‚€ ã® ã—ã”ã¨ ã‚’ ã—ã¾ã™", "ã‚Šã‚‡ã†ã‚Šã‚’ ã¤ãã‚Šã¾ã™", "ãã†ã˜ã‚’ ã—ã¾ã™"],
                correct: 1,
                explanation: "Staff TU (ã˜ã‚€ã„ã‚“) mengerjakan pekerjaan administrasi (ã˜ã‚€ ã® ã—ã”ã¨ ã‚’ ã—ã¾ã™)."
            },
            {
                question: "ã‚Šã‹ã—ã¤ ã§ ä½•ã‚’ ã—ã¾ã™ã‹ï¼Ÿ",
                options: ["ãˆã‚’ ã‹ãã¾ã™", "ã˜ã£ã‘ã‚“ã—ã¾ã™", "ãŠã‚ˆãã¾ã™", "ã­ã¾ã™"],
                correct: 1,
                explanation: "Di lab IPA (ã‚Šã‹ã—ã¤) kita melakukan eksperimen (ã˜ã£ã‘ã‚“ã—ã¾ã™)."
            }
        ];

        // Global variables
        let currentQuestion = 0;
        let userAnswers = [];
        let score = 0;
        let currentKosakata = 0;
        let currentPola = 0;

        // Navigation functions
        function showKosakata() {
            document.getElementById('main-menu').classList.add('hidden');
            document.getElementById('kosakata-screen').classList.remove('hidden');
            currentKosakata = 0;
            showKosakataItem();
        }

        function showPolaKalimat() {
            document.getElementById('main-menu').classList.add('hidden');
            document.getElementById('pola-screen').classList.remove('hidden');
            currentPola = 0;
            showPolaItem();
        }

        function showQuiz() {
            document.getElementById('main-menu').classList.add('hidden');
            document.getElementById('quiz-screen').classList.remove('hidden');
            currentQuestion = 0;
            userAnswers = [];
            score = 0;
            showQuestion();
        }

        function goToMainMenu() {
            document.getElementById('kosakata-screen').classList.add('hidden');
            document.getElementById('pola-screen').classList.add('hidden');
            document.getElementById('quiz-screen').classList.add('hidden');
            document.getElementById('result-screen').classList.add('hidden');
            document.getElementById('main-menu').classList.remove('hidden');
        }

        // Kosakata functions
        function showKosakataItem() {
            const item = kosakata[currentKosakata];
            document.getElementById('kosakata-number').textContent = `Kosakata ${currentKosakata + 1} dari ${kosakata.length}`;
            document.getElementById('kosakata-word').textContent = item.word;
            document.getElementById('kosakata-meaning').textContent = item.meaning;
            document.getElementById('kosakata-category').textContent = item.category;
            document.getElementById('kosakata-description').textContent = item.description;
            
            // Use emoji for kosakata module
            const imageElement = document.getElementById('kosakata-image');
            imageElement.innerHTML = item.icon;
            imageElement.classList.remove('loaded');
            
            const progress = ((currentKosakata + 1) / kosakata.length) * 100;
            document.getElementById('kosakata-progress').style.width = progress + '%';
            
            document.getElementById('prev-kosakata').disabled = currentKosakata === 0;
            document.getElementById('next-kosakata').textContent = currentKosakata === kosakata.length - 1 ? 'Selesai' : 'Selanjutnya';
        }

        function nextKosakata() {
            if (currentKosakata < kosakata.length - 1) {
                currentKosakata++;
                showKosakataItem();
            } else {
                goToMainMenu();
            }
        }

        function previousKosakata() {
            if (currentKosakata > 0) {
                currentKosakata--;
                showKosakataItem();
            }
        }

        // Pola Kalimat functions
        function showPolaItem() {
            const item = polaKalimat[currentPola];
            document.getElementById('pola-number').textContent = `Pola ${currentPola + 1} dari ${polaKalimat.length}`;
            document.getElementById('pola-content').innerHTML = item.content;
            
            const progress = ((currentPola + 1) / polaKalimat.length) * 100;
            document.getElementById('pola-progress').style.width = progress + '%';
            
            document.getElementById('prev-pola').disabled = currentPola === 0;
            document.getElementById('next-pola').textContent = currentPola === polaKalimat.length - 1 ? 'Selesai' : 'Selanjutnya';
        }

        function nextPola() {
            if (currentPola < polaKalimat.length - 1) {
                currentPola++;
                showPolaItem();
            } else {
                goToMainMenu();
            }
        }

        function previousPola() {
            if (currentPola > 0) {
                currentPola--;
                showPolaItem();
            }
        }

        // Quiz functions - PRESERVE existing PNG functionality
        function showQuestion() {
            const question = questions[currentQuestion];
            
            // Update progress
            const progress = ((currentQuestion + 1) / questions.length) * 100;
            document.getElementById('progress').style.width = progress + '%';
            
            // Update question number and text
            document.getElementById('question-number').textContent = `Pertanyaan ${currentQuestion + 1} dari ${questions.length}`;
            document.getElementById('question').textContent = question.question;
            
            // Handle image - PRESERVE existing PNG functionality
            const imageElement = document.getElementById('question-image');
            if (question.image) {
                imageElement.src = question.image;
                imageElement.classList.remove('hidden');
            } else {
                imageElement.classList.add('hidden');
            }
            
            // Create options
            const optionsContainer = document.getElementById('options');
            optionsContainer.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.innerHTML = `
                    <div class="option-letter">${String.fromCharCode(65 + index)}</div>
                    <div>${option}</div>
                `;
                optionElement.onclick = () => selectOption(index);
                optionsContainer.appendChild(optionElement);
            });
            
            // Update buttons
            document.getElementById('prev-btn').disabled = currentQuestion === 0;
            document.getElementById('next-btn').style.display = currentQuestion === questions.length - 1 ? 'none' : 'inline-block';
            document.getElementById('finish-btn').classList.toggle('hidden', currentQuestion !== questions.length - 1);
            
            // Reset next button
            document.getElementById('next-btn').disabled = true;
            
            // Show previous answer if exists
            if (userAnswers[currentQuestion] !== undefined) {
                selectOption(userAnswers[currentQuestion]);
            }
        }

        function selectOption(index) {
            const options = document.querySelectorAll('.option');
            options.forEach(option => option.classList.remove('selected'));
            options[index].classList.add('selected');
            
            userAnswers[currentQuestion] = index;
            document.getElementById('next-btn').disabled = false;
        }

        function nextQuestion() {
            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                showQuestion();
            }
        }

        function previousQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                showQuestion();
            }
        }

        function finishQuiz() {
            calculateScore();
            showResults();
        }

        function calculateScore() {
            score = 0;
            for (let i = 0; i < questions.length; i++) {
                if (userAnswers[i] === questions[i].correct) {
                    score++;
                }
            }
        }

        function showResults() {
            document.getElementById('quiz-screen').classList.add('hidden');
            document.getElementById('result-screen').classList.remove('hidden');
            
            const percentage = Math.round((score / questions.length) * 100);
            document.getElementById('final-score').textContent = `${score}/${questions.length} (${percentage}%)`;
            
            const feedbackElement = document.getElementById('feedback');
            if (percentage >= 85) {
                feedbackElement.className = 'feedback excellent';
                feedbackElement.innerHTML = `
                    <h3>ğŸŒŸ Sangat Baik Sekali!</h3>
                    <p>Anda memiliki pemahaman yang luar biasa tentang bahasa Jepang untuk lingkungan sekolah. Pertahankan prestasi ini!</p>
                `;
            } else if (percentage >= 70) {
                feedbackElement.className = 'feedback good';
                feedbackElement.innerHTML = `
                    <h3>ğŸ‘ Baik!</h3>
                    <p>Pemahaman Anda sudah cukup baik. Terus berlatih kosakata dan pola kalimat untuk meningkatkan kemampuan.</p>
                `;
            } else {
                feedbackElement.className = 'feedback needs-improvement';
                feedbackElement.innerHTML = `
                    <h3>ğŸ’ª Perlu Latihan Lebih</h3>
                    <p>Jangan menyerah! Pelajari kembali materi kosakata dan pola kalimat, lalu coba lagi. Anda pasti bisa!</p>
                `;
            }
        }

        function restartQuiz() {
            currentQuestion = 0;
            userAnswers = [];
            score = 0;
            
            document.getElementById('result-screen').classList.add('hidden');
            document.getElementById('quiz-screen').classList.remove('hidden');
            showQuestion();
        }

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            console.log('âœ… Aplikasi Pembelajaran Bahasa Jepang siap digunakan!');
            console.log(`ğŸ“š Total Kosakata: ${kosakata.length}`);
            console.log(`ğŸ’¬ Total Pola Kalimat: ${polaKalimat.length}`);
            console.log(`âœï¸ Total Soal Quiz: ${questions.length}`);
            console.log('ğŸ–¼ï¸ PNG Images preserved for quiz questions!');
        });
    </script>
</body>
</html>
